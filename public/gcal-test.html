<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Google Calendar API Minimal Test</title>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <h2>Google Calendar API Minimal Test</h2>
  <button id="authBtn">Sign In with Google</button>
  <pre id="output"></pre>
  <script>
    const CLIENT_ID = '507618059169-eljil3v8bah6ks9fug43qk9t8garnuh4.apps.googleusercontent.com';
    const API_KEY = 'AIzaSyD-2r01xGtYmo-hugPhG8PcApPmpAkZ7Qc';
    const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];
    const SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

    function log(msg) {
      document.getElementById('output').textContent += msg + '\n';
    }

    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: DISCOVERY_DOCS,
        scope: SCOPES
      }).then(() => {
        log('Google API initialized!');
        document.getElementById('authBtn').onclick = handleAuthClick;
      }, (error) => {
        log('Error initializing: ' + JSON.stringify(error));
      });
    }

    function handleAuthClick() {
      gapi.auth2.getAuthInstance().signIn().then(user => {
        log('Signed in as: ' + user.getBasicProfile().getEmail());
      }, err => {
        log('Sign-in error: ' + err.error);
      });
    }

    window.onload = handleClientLoad;
  </script>
</body>
</html>
